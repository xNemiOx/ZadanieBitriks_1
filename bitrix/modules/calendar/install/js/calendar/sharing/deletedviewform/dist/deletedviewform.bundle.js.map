{"version":3,"file":"deletedviewform.bundle.js","sources":["../src/deletedviewform.js"],"sourcesContent":["import { Type, Tag, Dom } from 'main.core';\nimport { Event } from \"calendar.sharing.public-v2\";\nimport './css/deletedviewform.css';\n\nexport class DeletedViewForm\n{\n\tconstructor(entryId)\n\t{\n\t\tthis.entryId = entryId;\n\t}\n\n\tinitInSlider(slider, promiseResolve)\n\t{\n\t\tthis.createContent(slider).then((html) => {\n\t\t\tif (Type.isFunction(promiseResolve))\n\t\t\t{\n\t\t\t\tpromiseResolve(html);\n\t\t\t}\n\t\t});\n\t}\n\n\tcreateContent(slider)\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tBX.ajax.runAction('calendar.api.sharingajax.getDeletedSharedEvent', {\n\t\t\t\tdata: {\n\t\t\t\t\tentryId: parseInt(this.entryId),\n\t\t\t\t}\n\t\t\t}).then(response => {\n\t\t\t\tconst entry = response.data.entry;\n\t\t\t\tconst link = response.data.link;\n\t\t\t\tconst userTimezone = response.data.userTimezone;\n\n\t\t\t\tconst deletedEvent = new Event({\n\t\t\t\t\tisHiddenOnStart: false,\n\t\t\t\t\towner: {\n\t\t\t\t\t\tname: entry.HOST_NAME,\n\t\t\t\t\t\tlastName: '',\n\t\t\t\t\t},\n\t\t\t\t\tevent: {\n\t\t\t\t\t\ttimestampFromUTC: entry.timestampFromUTC,\n\t\t\t\t\t\ttimestampToUTC: entry.timestampToUTC,\n\t\t\t\t\t\tcanceledTimestamp: link.canceledTimestamp,\n\t\t\t\t\t\texternalUserName: `<a href=\"/company/personal/user/${link.externalUserId}/\" target=\"_blank\" class=\"calendar-sharing-deletedviewform_open-profile\">${entry.HOST_NAME}</a>`,\n\t\t\t\t\t},\n\t\t\t\t\ttimezone: userTimezone,\n\t\t\t\t\tstate: 'declined',\n\t\t\t\t\tisView: true,\n\t\t\t\t\tinDeletedSlider: true,\n\t\t\t\t});\n\n\t\t\t\tconst deletedViewSliderRoot = Tag.render`\n\t\t\t\t\t<div class=\"calendar-shared-event-deleted-view-slider-root\">\n\t\t\t\t\t\t<div class=\"calendar-pub__block calendar-pub__state\">\n\t\t\t\t\t\t\t${deletedEvent.render()}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\n\t\t\t\tslider.sliderContent = deletedViewSliderRoot;\n\t\t\t\tresolve(deletedViewSliderRoot);\n\t\t\t})\n\t\t});\n\t}\n}"],"names":["DeletedViewForm","constructor","entryId","initInSlider","slider","promiseResolve","createContent","then","html","Type","isFunction","Promise","resolve","BX","ajax","runAction","data","parseInt","response","entry","link","userTimezone","deletedEvent","Event","isHiddenOnStart","owner","name","HOST_NAME","lastName","event","timestampFromUTC","timestampToUTC","canceledTimestamp","externalUserName","externalUserId","timezone","state","isView","inDeletedSlider","deletedViewSliderRoot","Tag","render","sliderContent"],"mappings":";;;;;;;AAAA,CAIO,MAAMA,eAAe,CAC5B;GACCC,WAAW,CAACC,OAAO,EACnB;KACC,IAAI,CAACA,OAAO,GAAGA,OAAO;;GAGvBC,YAAY,CAACC,MAAM,EAAEC,cAAc,EACnC;KACC,IAAI,CAACC,aAAa,CAACF,MAAM,CAAC,CAACG,IAAI,CAAEC,IAAI,IAAK;OACzC,IAAIC,cAAI,CAACC,UAAU,CAACL,cAAc,CAAC,EACnC;SACCA,cAAc,CAACG,IAAI,CAAC;;MAErB,CAAC;;GAGHF,aAAa,CAACF,MAAM,EACpB;KACC,OAAO,IAAIO,OAAO,CAAEC,OAAO,IAAK;OAC/BC,EAAE,CAACC,IAAI,CAACC,SAAS,CAAC,gDAAgD,EAAE;SACnEC,IAAI,EAAE;WACLd,OAAO,EAAEe,QAAQ,CAAC,IAAI,CAACf,OAAO;;QAE/B,CAAC,CAACK,IAAI,CAACW,QAAQ,IAAI;SACnB,MAAMC,KAAK,GAAGD,QAAQ,CAACF,IAAI,CAACG,KAAK;SACjC,MAAMC,IAAI,GAAGF,QAAQ,CAACF,IAAI,CAACI,IAAI;SAC/B,MAAMC,YAAY,GAAGH,QAAQ,CAACF,IAAI,CAACK,YAAY;SAE/C,MAAMC,YAAY,GAAG,IAAIC,+BAAK,CAAC;WAC9BC,eAAe,EAAE,KAAK;WACtBC,KAAK,EAAE;aACNC,IAAI,EAAEP,KAAK,CAACQ,SAAS;aACrBC,QAAQ,EAAE;YACV;WACDC,KAAK,EAAE;aACNC,gBAAgB,EAAEX,KAAK,CAACW,gBAAgB;aACxCC,cAAc,EAAEZ,KAAK,CAACY,cAAc;aACpCC,iBAAiB,EAAEZ,IAAI,CAACY,iBAAiB;aACzCC,gBAAgB,EAAG,mCAAkCb,IAAI,CAACc,cAAe,4EAA2Ef,KAAK,CAACQ,SAAU;YACpK;WACDQ,QAAQ,EAAEd,YAAY;WACtBe,KAAK,EAAE,UAAU;WACjBC,MAAM,EAAE,IAAI;WACZC,eAAe,EAAE;UACjB,CAAC;SAEF,MAAMC,qBAAqB,GAAGC,aAAG,CAACC,MAAM,cAAC;;;SAGtC,CAAwB;;;KAG3B,GAHKnB,YAAY,CAACmB,MAAM,EAAE,CAGzB;SAEDrC,MAAM,CAACsC,aAAa,GAAGH,qBAAqB;SAC5C3B,OAAO,CAAC2B,qBAAqB,CAAC;QAC9B,CAAC;MACF,CAAC;;CAEJ;;;;;;;;"}